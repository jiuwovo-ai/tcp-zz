# Port Forward Dashboard

ä¸€ä¸ªé«˜æ€§èƒ½ã€å®æ—¶ç›‘æ§çš„ç«¯å£è½¬å‘ç®¡ç†é¢æ¿ï¼Œé‡‡ç”¨ç°ä»£åŒ– UI è®¾è®¡ã€‚

## ğŸ“ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (Vue 3)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Dashboard â”‚  â”‚ Tunnels  â”‚  â”‚  Login   â”‚  â”‚  ECharts å›¾è¡¨    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                        â”‚
â”‚              WebSocket (å®æ—¶æ•°æ®) + REST API                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend (Go + Gin)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   API Server â”‚  â”‚  WebSocket   â”‚  â”‚    Auth (JWT)          â”‚ â”‚
â”‚  â”‚   (REST)     â”‚  â”‚    Hub       â”‚  â”‚                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                â”‚                    â”‚                â”‚
â”‚           â–¼                â–¼                    â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                   Forwarder Manager                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚â”‚
â”‚  â”‚  â”‚ Tunnel1 â”‚  â”‚ Tunnel2 â”‚  â”‚ Tunnel3 â”‚  â”‚ TunnelN â”‚         â”‚â”‚
â”‚  â”‚  â”‚ TCP/UDP â”‚  â”‚ TCP/UDP â”‚  â”‚ TCP/UDP â”‚  â”‚ TCP/UDP â”‚         â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â”‚                                                      â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                   System Monitor                             â”‚â”‚
â”‚  â”‚  CPU | Memory | Network I/O | Latency Probe                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æŠ€æœ¯æ ˆ

### åç«¯
- **Go 1.21+** - é«˜æ€§èƒ½ã€ä½å†…å­˜å ç”¨
- **Gin** - è½»é‡çº§ HTTP æ¡†æ¶
- **gorilla/websocket** - WebSocket å®æ—¶é€šä¿¡
- **gopsutil** - ç³»ç»Ÿç›‘æ§
- **JWT** - èº«ä»½è®¤è¯

### å‰ç«¯
- **Vue 3** - ç»„åˆå¼ API
- **Vite** - å¿«é€Ÿæ„å»º
- **Naive UI** - ç°ä»£åŒ–ç»„ä»¶åº“
- **TailwindCSS** - åŸå­åŒ– CSS
- **ECharts** - å®æ—¶å›¾è¡¨
- **Pinia** - çŠ¶æ€ç®¡ç†

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ç«¯å£è½¬å‘
- âœ… TCP / UDP åè®®æ”¯æŒ
- âœ… IPv4 æ”¯æŒ
- âœ… åŠ¨æ€æ·»åŠ /åˆ é™¤/ä¿®æ”¹è§„åˆ™
- âœ… è§„åˆ™å¯ç”¨/åœç”¨
- âœ… é…ç½®æŒä¹…åŒ–

### å®æ—¶ç›‘æ§
- âœ… æ¯ç§’æµé‡é€Ÿç‡ (KB/s, MB/s)
- âœ… æ€»æµé‡ç»Ÿè®¡
- âœ… WebSocket å®æ—¶æ¨é€
- âœ… ECharts åŠ¨æ€æŠ˜çº¿å›¾

### å»¶è¿Ÿç›‘æ§
- âœ… TCP æ¡æ‰‹å»¶è¿Ÿæ£€æµ‹
- âœ… 5ç§’é—´éš”è‡ªåŠ¨æ¢æµ‹
- âœ… çŠ¶æ€åˆ†çº§æ˜¾ç¤º (ğŸŸ¢æ­£å¸¸ ğŸŸ¡åé«˜ ğŸ”´è¶…æ—¶)

### ç³»ç»ŸçŠ¶æ€
- âœ… CPU ä½¿ç”¨ç‡
- âœ… å†…å­˜ä½¿ç”¨ç‡
- âœ… ç½‘ç»œååé‡
- âœ… è¿è¡Œæ—¶é—´

### å®‰å…¨
- âœ… è´¦å·å¯†ç ç™»å½•
- âœ… JWT Token è®¤è¯
- âœ… 24å°æ—¶ Token è¿‡æœŸ

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Go 1.21+
- Node.js 18+
- npm æˆ– pnpm

### å¼€å‘æ¨¡å¼

```bash
# 1. å…‹éš†é¡¹ç›®åè¿›å…¥ç›®å½•
cd port-forward-dashboard

# 2. å®‰è£…åç«¯ä¾èµ–
cd backend
go mod tidy

# 3. å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install

# 4. å¯åŠ¨åç«¯ (æ–°ç»ˆç«¯)
cd backend
go run .

# 5. å¯åŠ¨å‰ç«¯ (æ–°ç»ˆç«¯)
cd frontend
npm run dev
```

è®¿é—® http://localhost:3000

**é»˜è®¤è´¦å·**: admin / admin123

### ç”Ÿäº§æ„å»º

```bash
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# æ„å»ºåç«¯
cd ../backend
go build -o port-forward-dashboard .

# è¿è¡Œ
./port-forward-dashboard
```

è®¿é—® http://localhost:8080

## ğŸ³ Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t port-forward-dashboard .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name port-forward-dashboard \
  --network host \
  -v $(pwd)/config.json:/app/config.json \
  port-forward-dashboard
```

æˆ–ä½¿ç”¨ docker-compose:

```bash
docker-compose up -d
```

## ğŸ”§ Systemd éƒ¨ç½²

```bash
# æ„å»º
make build

# å®‰è£… (éœ€è¦ root)
sudo make install

# å¯åŠ¨æœåŠ¡
sudo systemctl start port-forward-dashboard

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status port-forward-dashboard

# æŸ¥çœ‹æ—¥å¿—
journalctl -u port-forward-dashboard -f
```

## âš™ï¸ é…ç½®æ–‡ä»¶

`config.json` ç¤ºä¾‹:

```json
{
  "port": 8080,
  "username": "admin",
  "password": "your-secure-password",
  "jwt_secret": "your-jwt-secret-change-this",
  "rules": []
}
```

**é‡è¦**: ç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹é»˜è®¤å¯†ç å’Œ JWT å¯†é’¥ï¼

## ğŸ“ é¡¹ç›®ç»“æ„

```
port-forward-dashboard/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.go                 # å…¥å£
â”‚   â”œâ”€â”€ go.mod
â”‚   â””â”€â”€ internal/
â”‚       â”œâ”€â”€ api/
â”‚       â”‚   â”œâ”€â”€ server.go       # HTTP æœåŠ¡å™¨
â”‚       â”‚   â”œâ”€â”€ auth.go         # JWT è®¤è¯
â”‚       â”‚   â””â”€â”€ websocket.go    # WebSocket
â”‚       â”œâ”€â”€ config/
â”‚       â”‚   â””â”€â”€ config.go       # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ forwarder/
â”‚       â”‚   â”œâ”€â”€ manager.go      # è½¬å‘ç®¡ç†å™¨
â”‚       â”‚   â””â”€â”€ tunnel.go       # éš§é“å®ç°
â”‚       â”œâ”€â”€ models/
â”‚       â”‚   â””â”€â”€ models.go       # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ monitor/
â”‚           â””â”€â”€ system.go       # ç³»ç»Ÿç›‘æ§
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                # API å°è£…
â”‚   â”‚   â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ router/             # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ stores/             # Pinia çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â””â”€â”€ main.js
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Makefile
â””â”€â”€ README.md
```

## ğŸ”Œ API æ¥å£

### è®¤è¯
- `POST /api/login` - ç™»å½•

### è§„åˆ™ç®¡ç†
- `GET /api/rules` - è·å–æ‰€æœ‰è§„åˆ™
- `POST /api/rules` - åˆ›å»ºè§„åˆ™
- `PUT /api/rules/:id` - æ›´æ–°è§„åˆ™
- `DELETE /api/rules/:id` - åˆ é™¤è§„åˆ™
- `POST /api/rules/:id/toggle` - å¯ç”¨/åœç”¨

### ç›‘æ§
- `GET /api/dashboard` - è·å–ä»ªè¡¨æ¿æ•°æ®
- `GET /api/system` - è·å–ç³»ç»ŸçŠ¶æ€
- `GET /api/ws` - WebSocket è¿æ¥

## ğŸ§  æ ¸å¿ƒå®ç°è¯´æ˜

### ç«¯å£è½¬å‘å¼•æ“
- ä½¿ç”¨ Go åŸç”Ÿ `net` åŒ…å®ç° TCP/UDP è½¬å‘
- æ¯ä¸ªéš§é“ç‹¬ç«‹ goroutine ç®¡ç†
- ä½¿ç”¨ `atomic` åŒ…å®ç°æ— é”æµé‡ç»Ÿè®¡
- æ”¯æŒä¼˜é›…å…³é—­

### æµé‡ç»Ÿè®¡
- ä½¿ç”¨ `sync/atomic` åŸå­æ“ä½œè®¡æ•°
- æ¯ç§’è®¡ç®—é€Ÿç‡å·®å€¼
- WebSocket å¹¿æ’­åˆ°æ‰€æœ‰å®¢æˆ·ç«¯

### å»¶è¿Ÿæ¢æµ‹
- æ¯ 5 ç§’ TCP æ¡æ‰‹æµ‹è¯•
- è¶…æ—¶è®¾ç½® 5 ç§’
- çŠ¶æ€åˆ†çº§: <100ms æ­£å¸¸, <300ms åé«˜, >=300ms æˆ–è¶…æ—¶ä¸ºå¼‚å¸¸

## ğŸ”® æ‰©å±•å»ºè®®

1. **å¤šèŠ‚ç‚¹æ”¯æŒ**: æ·»åŠ èŠ‚ç‚¹ç®¡ç† APIï¼Œä½¿ç”¨ gRPC é€šä¿¡
2. **æµé‡é™é€Ÿ**: åœ¨ `copyWithStats` ä¸­æ·»åŠ ä»¤ç‰Œæ¡¶é™é€Ÿ
3. **å‘Šè­¦é€šçŸ¥**: é›†æˆ Webhook/é‚®ä»¶é€šçŸ¥
4. **æ•°æ®æŒä¹…åŒ–**: ä½¿ç”¨ SQLite/PostgreSQL å­˜å‚¨å†å²æ•°æ®
5. **HTTPS**: é…ç½® TLS è¯ä¹¦

## ğŸ“„ License

MIT License
